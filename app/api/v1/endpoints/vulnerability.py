from fastapi import APIRouter, Path
from fastapi.exceptions import HTTPException
from app.service.vulnerability_service import VulnerabilityService


router = APIRouter()
service = VulnerabilityService()


@router.get("/vulnerability/id={id}")
async def get_vulnerability_by_id(id: int = Path(..., title="ID of Kelurahan")):
    vulnerability_data = service.get_vulnerability_by_id(id)
    if vulnerability_data is None:
        raise HTTPException(status_code=404, detail="Data not found")
    return vulnerability_data


@router.get("/vulnerability")
async def get_all_vulnerability():
    return service.get_all_vulnerability()
